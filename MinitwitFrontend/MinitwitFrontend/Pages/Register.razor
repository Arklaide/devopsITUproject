@page "/register"
@inherits RegisterBase

@if (isLoading)
{
    <div class="spinner">Loading...</div>
}
else
{
    <div class="card">
        <h4 class="card-header">Sign Up</h4>
        <div class="card-body">
            <EditForm Model="@user" OnValidSubmit="OnValidSubmit">
                <DataAnnotationsValidator />
                <div class="form-group">
                    <label>Username</label>
                    <InputText @bind-Value="user.username" class="form-control" />
                    <ValidationMessage For="@(() => user.username)" />
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <InputText @bind-Value="user.email" class="form-control" />
                    <ValidationMessage For="@(() => user.email)" />
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <InputText @bind-Value="pwd1" type="password" class="form-control" />
                    <ValidationMessage For="@(() => pwd1)" />
                </div>
                <div class="form-group">
                    <label>Password (repeat)</label>
                    <InputText @bind-Value="pwd2" type="password" class="form-control" />
                    <ValidationMessage For="@(() => pwd2)" />
                </div>

                <button disabled="@isLoading" class="btn btn-primary">
                    @if (isLoading)
                    {
                        <span class="spinner-border spinner-border-sm mr-1"></span>
                    }
                    Register
                </button>
                <NavLink href="login" class="btn btn-link">Login</NavLink>
            </EditForm>
        </div>
        <div style="color: red; padding: 20px;">@errorText</div>
    </div>
}
